{{- if .Values.secretProviderClass.enabled }}
apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: {{ include "notify.fullname" . }}
  labels:
    {{- include "notify.labels" . | nindent 4 }}
spec:
  provider: {{ .Values.secretProviderClass.provider }}
  #This is the source names from AWS Secrets Manager
  parameters:
    objects: |
      - objectName: MANIFEST_ADMIN_CLIENT_SECRET
        objectType: "secretsmanager"
      - objectName: MANIFEST_CRM_GITHUB_PERSONAL_ACCESS_TOKEN
        objectType: "secretsmanager"
      - objectName: MANIFEST_DANGEROUS_SALT
        objectType: "secretsmanager"
      - objectName: MANIFEST_SECRET_KEY
        objectType: "secretsmanager"
      - objectName: MANIFEST_SQLALCHEMY_DATABASE_URI
        objectType: "secretsmanager"
      - objectName: MANIFEST_REDIS_URL
        objectType: "secretsmanager"
      - objectName: MANIFEST_REDIS_PUBLISH_URL
        objectType: "secretsmanager"
      - objectName: MANIFEST_GC_ARTICLES_API_AUTH_USERNAME
        objectType: "secretsmanager"
      - objectName: MANIFEST_GC_ARTICLES_API_AUTH_PASSWORD
        objectType: "secretsmanager"
      - objectName: MANIFEST_WAF_SECRET
        objectType: "secretsmanager"
      - objectName: MANIFEST_MIXPANEL_PROJECT_TOKEN
        objectType: "secretsmanager"
      - objectName: MANIFEST_NEW_RELIC_LICENSE_KEY
        objectType: "secretsmanager"
      - objectName: MANIFEST_DEBUG_KEY
        objectType: "secretsmanager"
      
  #This is the target name in the kubernetes secret      
  secretObjects:
    - data:
      - key: ADMIN_CLIENT_SECRET
        objectName: MANIFEST_ADMIN_CLIENT_SECRET
      - key: CRM_GITHUB_PERSONAL_ACCESS_TOKEN
        objectName: MANIFEST_CRM_GITHUB_PERSONAL_ACCESS_TOKEN
      - key: DANGEROUS_SALT
        objectName: MANIFEST_DANGEROUS_SALT
      - key: SECRET_KEY 
        objectName: MANIFEST_SECRET_KEY   
      - key: SQLALCHEMY_DATABASE_URI
        objectName: MANIFEST_SQLALCHEMY_DATABASE_URI
      - key: DEBUG_KEY  
        objectName: MANIFEST_DEBUG_KEY
      - key: REDIS_URL
        objectName: MANIFEST_REDIS_URL
      - key: REDIS_PUBLISH_URL
        objectName: MANIFEST_REDIS_PUBLISH_URL
      - key: NEW_RELIC_LICENSE_KEY
        objectName: MANIFEST_NEW_RELIC_LICENSE_KEY
      - key: GC_ARTICLES_API_AUTH_USERNAME
        objectName: MANIFEST_GC_ARTICLES_API_AUTH_USERNAME
      - key: GC_ARTICLES_API_AUTH_PASSWORD
        objectName: MANIFEST_GC_ARTICLES_API_AUTH_PASSWORD
      - key: WAF_SECRET
        objectName: MANIFEST_WAF_SECRET
      - key: MIXPANEL_PROJECT_TOKEN
        objectName: MANIFEST_MIXPANEL_PROJECT_TOKEN
      secretName: notify-admin
      type: generic

{{ end }}

    # ðŸ”Š [POP-401] Key "SALESFORCE_PASSWORD" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SENDGRID_API_KEY" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SALESFORCE_ENGAGEMENT_STANDARD_PRICEBOOK_ID" used? Unable to locate key 
    #    reference. 
    # ðŸ”Š [POP-401] Key "SALESFORCE_USERNAME" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SALESFORCE_SECURITY_TOKEN" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "AWS_SES_SECRET_KEY" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "AWS_SES_ACCESS_KEY" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "AWS_ROUTE53_ZONE" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SALESFORCE_ENGAGEMENT_PRODUCT_ID" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "FRESH_DESK_PRODUCT_ID" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SRE_CLIENT_SECRET" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "FRESH_DESK_API_KEY" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SALESFORCE_GENERIC_ACCOUNT_ID" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SQLALCHEMY_DATABASE_READER_URI" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "CYPRESS_AUTH_CLIENT_SECRET" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "SALESFORCE_ENGAGEMENT_RECORD_TYPE" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "ZENDESK_API_KEY" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "POSTGRES_HOST" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "CYPRESS_USER_PW_SECRET" used? Unable to locate key reference.
    # ðŸ”Š [POP-401] Key "ZENDESK_SELL_API_KEY" used? Unable to locate key reference.