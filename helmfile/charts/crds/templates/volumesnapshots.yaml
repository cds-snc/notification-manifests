---
# Source: https://github.com/kubernetes-csi/external-snapshotter
# VolumeSnapshotClass CRD
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: volumesnapshotclasses.snapshot.storage.k8s.io
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
    api-approved.kubernetes.io: "https://github.com/kubernetes-csi/external-snapshotter/pull/1099"
  labels:
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  group: snapshot.storage.k8s.io
  names:
    kind: VolumeSnapshotClass
    listKind: VolumeSnapshotClassList
    plural: volumesnapshotclasses
    singular: volumesnapshotclass
  scope: Cluster
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: VolumeSnapshotClass specifies parameters used during creation
          of a volume snapshot.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.'
            type: string
          deletionPolicy:
            description: deletionPolicy determines whether a VolumeSnapshotContent
              created through this VolumeSnapshotClass should be deleted when its
              bound VolumeSnapshot is deleted.
            enum:
            - Delete
            - Retain
            type: string
          driver:
            description: driver is the name of the CSI driver used by this VolumeSnapshotClass.
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.'
            type: string
          parameters:
            additionalProperties:
              type: string
            description: parameters is a key-value map with storage driver specific
              parameters for creating snapshots.
            type: object
        required:
        - deletionPolicy
        - driver
        type: object
    served: true
    storage: true
---
# VolumeSnapshotContent CRD
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: volumesnapshotcontents.snapshot.storage.k8s.io
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
    api-approved.kubernetes.io: "https://github.com/kubernetes-csi/external-snapshotter/pull/1099"
  labels:
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  group: snapshot.storage.k8s.io
  names:
    kind: VolumeSnapshotContent
    listKind: VolumeSnapshotContentList
    plural: volumesnapshotcontents
    singular: volumesnapshotcontent
  scope: Cluster
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: VolumeSnapshotContent represents the actual "on-disk" snapshot
          object in the underlying storage system
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.'
            type: string
          spec:
            description: spec defines properties of a VolumeSnapshotContent created
              by the underlying storage system.
            properties:
              deletionPolicy:
                description: deletionPolicy determines whether this VolumeSnapshotContent
                  and its physical snapshot on the underlying storage system should
                  be deleted when its bound VolumeSnapshot is deleted.
                enum:
                - Delete
                - Retain
                type: string
              driver:
                description: driver is the name of the CSI driver used to create
                  the physical snapshot on the underlying storage system.
                type: string
              source:
                description: source specifies whether the snapshot is (or should be)
                  dynamically provisioned or already exists, and just requires a Kubernetes
                  object representation.
                properties:
                  snapshotHandle:
                    description: snapshotHandle specifies the CSI "snapshot_id" of
                      a pre-existing snapshot on the underlying storage system for
                      which a Kubernetes object representation was (or should be)
                      created.
                    type: string
                  volumeHandle:
                    description: volumeHandle specifies the CSI "volume_id" of the
                      volume from which a snapshot should be dynamically taken from.
                    type: string
                type: object
                oneOf:
                - required: ["snapshotHandle"]
                - required: ["volumeHandle"]
              sourceVolumeMode:
                description: SourceVolumeMode is the mode of the volume whose snapshot
                  is taken.
                type: string
              volumeSnapshotClassName:
                description: name of the VolumeSnapshotClass from which this snapshot
                  was (or will be) created.
                type: string
              volumeSnapshotRef:
                description: volumeSnapshotRef specifies the VolumeSnapshot object
                  to which this VolumeSnapshotContent object is bound.
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  fieldPath:
                    description: 'If referring to a piece of an object instead of
                      an entire object, this string should contain a valid JSON/Go
                      field access statement.'
                    type: string
                  kind:
                    description: 'Kind of the referent.'
                    type: string
                  name:
                    description: 'Name of the referent.'
                    type: string
                  namespace:
                    description: 'Namespace of the referent.'
                    type: string
                  resourceVersion:
                    description: 'Specific resourceVersion to which this reference
                      is made, if any.'
                    type: string
                  uid:
                    description: 'UID of the referent.'
                    type: string
                type: object
            required:
            - deletionPolicy
            - driver
            - source
            - volumeSnapshotRef
            type: object
          status:
            description: status represents the current information of a snapshot.
            properties:
              creationTime:
                description: creationTime is the timestamp when the point-in-time
                  snapshot is taken by the underlying storage system.
                format: int64
                type: integer
              error:
                description: error is the last observed error during snapshot creation,
                  if any.
                properties:
                  message:
                    description: 'message is a string detailing the encountered error
                      during snapshot creation if specified.'
                    type: string
                  time:
                    description: time is the timestamp when the error was encountered.
                    format: date-time
                    type: string
                type: object
              readyToUse:
                description: readyToUse indicates if a snapshot is ready to be used
                  to restore a volume.
                type: boolean
              restoreSize:
                description: restoreSize represents the complete size of the snapshot
                  in bytes.
                format: int64
                type: integer
              snapshotHandle:
                description: snapshotHandle is the CSI "snapshot_id" of a snapshot
                  on the underlying storage system.
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# VolumeSnapshot CRD
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: volumesnapshots.snapshot.storage.k8s.io
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
    api-approved.kubernetes.io: "https://github.com/kubernetes-csi/external-snapshotter/pull/1099"
  labels:
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  group: snapshot.storage.k8s.io
  names:
    kind: VolumeSnapshot
    listKind: VolumeSnapshotList
    plural: volumesnapshots
    singular: volumesnapshot
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: VolumeSnapshot is a user's request for either creating a point-in-time
          snapshot of a persistent volume, or binding to a pre-existing snapshot.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object.'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents.'
            type: string
          spec:
            description: spec defines the desired characteristics of a snapshot requested
              by a user.
            properties:
              source:
                description: source specifies where a snapshot will be created from.
                properties:
                  persistentVolumeClaimName:
                    description: persistentVolumeClaimName specifies the name of the
                      PersistentVolumeClaim object representing the volume from which
                      a snapshot should be created.
                    type: string
                  volumeSnapshotContentName:
                    description: volumeSnapshotContentName specifies the name of a
                      pre-existing VolumeSnapshotContent object representing an existing
                      volume snapshot.
                    type: string
                type: object
                oneOf:
                - required: ["persistentVolumeClaimName"]
                - required: ["volumeSnapshotContentName"]
              volumeSnapshotClassName:
                description: VolumeSnapshotClassName is the name of the VolumeSnapshotClass
                  requested by the VolumeSnapshot.
                type: string
            required:
            - source
            type: object
          status:
            description: status represents the current information of a snapshot.
            properties:
              boundVolumeSnapshotContentName:
                description: 'boundVolumeSnapshotContentName is the name of the VolumeSnapshotContent
                  object to which this VolumeSnapshot object intends to bind to.'
                type: string
              creationTime:
                description: creationTime is the timestamp when the point-in-time
                  snapshot is taken by the underlying storage system.
                format: date-time
                type: string
              error:
                description: error is the last observed error during snapshot creation,
                  if any.
                properties:
                  message:
                    description: 'message is a string detailing the encountered error
                      during snapshot creation if specified.'
                    type: string
                  time:
                    description: time is the timestamp when the error was encountered.
                    format: date-time
                    type: string
                type: object
              readyToUse:
                description: readyToUse indicates if the snapshot is ready to be
                  used to restore a volume.
                type: boolean
              restoreSize:
                description: restoreSize represents the minimum size of volume required
                  to create a volume from this snapshot.
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
