#### Change what type of node each deployment should be deployed to

#### KARPENTER SPOT INSTANCES - EPHEMERAL, STATE NOT REQUIRED

# Celery Email
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: celery
  name:  celery
  namespace: notification-canada-ca
spec:
  template:
    spec:
      nodeSelector:
        karpenter.sh/provisioner-name: default
---
# Celery SMS Send
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: celery-sms-send
  name:  celery-sms-send
  namespace: notification-canada-ca
spec:
  template:
    spec:
      nodeSelector:
        karpenter.sh/provisioner-name: default    
---
# Notification API K8s
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: api
  name:  api
  namespace: notification-canada-ca
spec:
  template:
    spec:
      nodeSelector:
        karpenter.sh/provisioner-name: default
---

### ON DEMAND (PRIMARY) NODES - ALWAYS AVAILABLE
# Celery Beat
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: celery-beat
  name:  celery-beat
  namespace: notification-canada-ca
spec:
  template:
    spec:
      nodeSelector:
        eks.amazonaws.com/capacityType: ON_DEMAND    
---
# Celery SMS
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: celery-sms
    profile: fargate
  name:  celery-sms
  namespace: notification-canada-ca
spec:
  template:
    spec:
      nodeSelector:
        eks.amazonaws.com/capacityType: ON_DEMAND
---
# Notify Admin
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: admin
  name:  admin
  namespace: notification-canada-ca
spec:
  template:
    spec:
      nodeSelector:
        eks.amazonaws.com/capacityType: ON_DEMAND
---
# Document Download API
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: document-download-api
  name: document-download-api
  namespace: notification-canada-ca
spec:
  template:
    spec:
      nodeSelector:
        eks.amazonaws.com/capacityType: ON_DEMAND    
---
# Documentation
apiVersion: apps/v1
kind: Deployment
metadata:
  name: documentation
  namespace: notification-canada-ca
  labels:
    app: documentation
spec:
  template:
    spec:
      nodeSelector:
        eks.amazonaws.com/capacityType: ON_DEMAND   